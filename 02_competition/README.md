# 時系列パート（実践編）

## ✅概要
基礎編で学んだ知識を活かし、実際の研究室のデータを用いたデータ分析と予測モデリングに挑戦します。
本コンペは2つの課題で構成されています。

- **課題① 可視化・分析:** データから洞察を得る分析能力を問う
- **課題② 予測:** 未来の研究室の活動量を予測するモデルの精度を競う

**目的:**
- 実データを用いたデータハンドリング能力、課題設定能力を養う
- データ分析を通じて、有用な知見を導き出すプロセスを体験する
- 予測モデルの精度を向上させるための試行錯誤（特徴量エンジニアリング、モデル選択など）を実践する

## 📚データセット
本コンペティションでは、以下の2つのデータセットを使用します。
- `attendance_data.csv`: 研究室メンバーの在室記録
    - `Date`: 日付（yyyy-mm-dd形式）
    - `Timestamp`: タイムスタンプ（ISO 8601形式）
    - `Name`: メンバー名
    - `Status`: メンバーのステータス（`clock_in`, `break_in`, `break_out`、`clock_out`の4状態）

- `calendar_data.csv`: 研究室の共有カレンダーの予定
    - `Date`: 日付（yyyy-mm-dd形式）
    - `StartTime`: 開始時刻（HH:MM:SS形式）
    - `EndTime`: 終了時刻（HH:MM:SS形式）
    - `Title`: 予定のタイトル

- `attendance_test_data.csv`: 予測すべき時刻情報
    - `Timestamp`: 予測対象のタイムスタンプ（ISO 8601形式）
- `calendar_test_data.csv`: 予測対象期間のカレンダー予定
    - 形式は`calendar_data.csv`と同様

※「在室期間」は`clock_in`後、次に`clock_out`するまでの期間であり、`break_in`後、次に`break_out`もしくは`clock_in`するまでの期間は含まないものとする。

## 📊課題①（必須）：可視化・分析レポート
`notebooks`ディレクトリに`analysis_report.ipynb`を作成し、以下の問いに対して可視化を行った上で、下記記載の観点例を参考に考察をまとめてください。

- 可視化課題

1. 全期間の在室人数推移（1時間単位）を可視化してください。
2. 時間帯別の平均在室人数を可視化してください。
3. 曜日別の在室人数推移（1時間単位）を可視化してください。
4. メンバー間の在室状態に関する相関関係を可視化してください。

💡各問いの可視化例は`hint`ディレクトリに格納されています。

- 考察の観点

1. 研究室の活動量は、1日の時間帯（例：朝、昼、夜など）や曜日によって、どのような周期性や傾向を持つか？
2. 長期的な視点で見た場合、活動量に繁忙期や閑散期は存在するか？
3. メンバー間の在室パターンには、どのような類似性（例：出勤時間帯など）や相違点（例：朝方、夜型など）が存在するか？

※上記に限らず、独自の観点での分析を歓迎します（加点対象）。

## 🤖課題②（必須）：未来の在室人数予測

過去のデータを用いて、未来のデータ（`attendance_test_data.csv`）における1時間単位の在室人数を予測するモデルを構築してください。

- **予測対象:** 指定された未来の期間の1時間ごとの在室人数
- **評価指標:** MAE, RMSE
- **提出物:** 予測結果を記述したCSVファイル（`submission.csv`）
    
    ```text
    Timestamp,Students
    2025-11-12 15:00:00,1
    2025-11-12 16:00:00,2
    2025-11-12 17:00:00,3
    ...
    ```

💡ヒント：生データのままでは「人数」を予測するデータとしては不適なため、適切な前処理が必要

### 🔥発展課題（任意）：カレンダー情報を活用した未来の在室人数予測
予測対象期間のカレンダー情報（`calendar_test_data.csv`）を特徴量として活用し、課題②で構築したモデル（`attendance_test_data.csv`における1時間単位の在室人数を予測するモデル）の精度向上を試行してください。

- **予測対象:** 課題②と同様
- **評価指標:** 課題②と同様
- **提出物:** 課題②と同様

💡ヒント：発生周期や発生頻度なども考慮して、各イベントと目的変数（在室人数）の関係を多角的に分析すると、、

### テストデータの評価方法について
`submission`ディレクトリの`_evaluate_submission.py`を実行すると、`submission.csv`に保存されている予測結果を正解データと比較して評価した結果が確認できます。
なお、比較できる**正解データは1週間分の期間のみ**のため、全てのテスト期間に対する評価結果ではありません。

```text
CS-Exercise-TimeSeries\02_competition\submission> python .\_evaluate_submission.py
==============================
✅ 評価結果 (Success)
------------------------------
  MAE : 2.746032
  RMSE: 4.084426
==============================
```

⚠️注意：このコードは**1日に実行できる回数（上限3回/日）が決まっている**ので、留意してください。