# 時系列パート（実践編）

## ✅概要
基礎編で学んだ知識を活かし、実際の研究室のデータを用いたデータ分析と予測モデリングに挑戦します。
本コンペは2つの課題で構成されています。

- **課題① 可視化・分析:** データから洞察を得る分析能力を問う
- **課題② 予測:** 未来の研究室の活動量を予測するモデルの精度を競う

**目的:**
- 実データを用いたデータハンドリング能力、課題設定能力を養う
- データ分析を通じて、有用な知見を導き出すプロセスを体験する
- 予測モデルの精度を向上させるための試行錯誤（特徴量エンジニアリング、モデル選択など）を実践する

## 📚データセット
本コンペティションでは、以下の2つのデータセットを使用します。
- `attendance_trainval_data.csv`: 過去4ヵ月分の研究室メンバーの在室記録
    - `Date`: 日付（yyyy-mm-dd形式）
    - `Timestamp`: タイムスタンプ（ISO 8601形式）
    - `Name`: メンバー名
    - `Status`: メンバーのステータス（`clock_in`, `break_in`, `break_out`、`clock_out`の4状態）

- `calendar_trainval_data.csv`: 在室記録と同様の期間における研究室の共有カレンダーの予定
    - `Date`: 日付（yyyy-mm-dd形式）
    - `StartTime`: 開始時刻（HH:MM:SS形式）
    - `EndTime`: 終了時刻（HH:MM:SS形式）
    - `Title`: 予定のタイトル

- `attendance_test_data.csv`: 予測すべき時刻情報
    - `Timestamp`: 予測対象のタイムスタンプ（ISO 8601形式）
- `calendar_test_data.csv`: 予測対象期間における研究室の共有カレンダーの予定
    - 形式は`calendar_trainval_data.csv`と同様

※「在室期間」は`clock_in`後、次に`clock_out`するまでの期間であり、`break_in`後、次に`break_out`もしくは`clock_in`するまでの期間は含まないものとする。

## 📊課題①（必須）：可視化・分析レポート
`notebooks`ディレクトリに`analysis_report.ipynb`を作成し、以下の問いに対して可視化を行った上で、下記記載の観点例を参考に考察をまとめてください。

- 可視化課題

1. 全期間の在室人数推移（1時間単位）を可視化してください。
2. 時間帯別の平均在室人数を可視化してください。
3. 曜日別の在室人数推移（1時間単位）を可視化してください。
4. メンバー間の在室状態に関する相関関係を可視化してください。

💡各問いの可視化例は`hint`ディレクトリに格納されています。

- 考察の観点

1. 研究室の活動量は、1日の時間帯（例：朝、昼、夜など）や曜日によって、どのような周期性や傾向を持つか？
2. 長期的な視点で見た場合、活動量に繁忙期や閑散期は存在するか？
3. メンバー間の在室パターンには、どのような類似性（例：出勤時間帯など）や相違点（例：朝方、夜型など）が存在するか？

※上記に限らず、独自の観点での分析を歓迎します（加点対象）。

## 🤖課題②（必須）：未来の在室人数予測

過去のデータ（4ヵ月：2025-07-13 00:00～2025-11-12 23:00）を用いて1時間単位の在室人数を予測するモデルを構築し、未来のデータ（2ヵ月：2025-11-13 00:00～2025-01-12 23:00）における在室人数を予測した結果を提出してください。

- **予測対象:** 指定された未来の期間の1時間ごとの在室人数
- **評価指標:** MAE, RMSE, Weighted RMSE, R2 Score
- **提出物:** 対象期間内の予測結果を記述したCSVファイル（`submission.csv`）
    
    ```text
    Timestamp,Students
    2025-11-13 00:00:00,0
    2025-11-13 01:00:00,0
    2025-11-13 02:00:00,0
    ...
    ```

💡ヒント：生データのままでは「人数」を予測するデータとしては不適なため、適切な前処理が必要

### 🔥発展課題（任意）：カレンダー情報を活用した未来の在室人数予測
カレンダー情報（`calendar_trainval_data.csv`や`calendar_test_data.csv`）を特徴量として活用し、課題②で構築したモデルの精度向上を試行してください。

- **予測対象:** 課題②と同様
- **評価指標:** 課題②と同様
- **提出物:** 課題②と同様

💡ヒント：発生周期や発生頻度なども考慮して、各イベントと目的変数（在室人数）の関係を多角的に分析すると、、

### テストデータの評価方法について
`submission`ディレクトリの`_evaluate_submission.py`を実行すると、`submission.csv`に保存されている予測結果を正解データと比較して評価した結果が確認できます。
なお、評価対象となる期間は`submission.csv`の期間に関わらず、**2週間：2025-11-13 00:00～2025-11-27 23:00 のみ**のため、全てのテスト期間に対する評価結果ではないことに注意してください。

- ベースライン（全て0と予測した場合）
```text
~/workspace/02_competition/submission$ python3 _evaluate_submission.py
========================================
✅ 評価結果 (Success)
----------------------------------------
  MAE            : 3.744048
  RMSE           : 5.782259
  Weighted RMSE  : 6.484089
  R2 Score       : -0.721953
----------------------------------------
  評価行数       : 168 行
========================================
```

⚠️注意：このコードは**ユーザーごとに1日に実行できる回数（上限3回/日）が決まっている**ので、慎重に実行してください。